<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#0f1726" />
    <meta
      name="description"
      content="AiX Markdown 排版工坊：参考 doocs/md 思路做二次创作，针对博客、公众号等长文输出高质量排版。"
    />
    <title>AiX Markdown 排版工坊</title>
    <link rel="icon" type="image/svg+xml" href="/icon-192.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;700&family=JetBrains+Mono:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/md-lab/styles.css?v=20260221-2" />
  </head>
  <body>
    <div class="orb orb-a"></div>
    <div class="orb orb-b"></div>

    <svg class="icon-sprite" aria-hidden="true" focusable="false">
      <symbol id="i-back" viewBox="0 0 24 24">
        <path d="M14 6 8 12l6 6M9 12h7" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
      </symbol>
      <symbol id="i-md" viewBox="0 0 24 24">
        <path d="M4 6h16v12H4z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round" />
        <path d="m7 15 2.5-4L12 15m2-4v4l2-2 2 2v-4" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
      </symbol>
      <symbol id="i-magic" viewBox="0 0 24 24">
        <path d="M12 3 13.8 8.2 19 10l-5.2 1.8L12 17l-1.8-5.2L5 10l5.2-1.8Z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round" />
      </symbol>
      <symbol id="i-copy" viewBox="0 0 24 24">
        <path d="M9 9h10v11H9z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round" />
        <path d="M5 15V4h10" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
      </symbol>
      <symbol id="i-download" viewBox="0 0 24 24">
        <path d="M12 4v10m-4-4 4 4 4-4M4 19h16" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
      </symbol>
      <symbol id="i-article" viewBox="0 0 24 24">
        <path d="M7 3h7l5 5v13H7z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round" />
        <path d="M14 3v5h5M10 13h6M10 17h6" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
      </symbol>
      <symbol id="i-preview" viewBox="0 0 24 24">
        <path d="M2 12s3.8-6 10-6 10 6 10 6-3.8 6-10 6S2 12 2 12Z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round" />
        <circle cx="12" cy="12" r="2.5" fill="none" stroke="currentColor" stroke-width="1.8" />
      </symbol>
      <symbol id="i-setting" viewBox="0 0 24 24">
        <path d="M12 8.3a3.7 3.7 0 1 1 0 7.4 3.7 3.7 0 0 1 0-7.4Z" fill="none" stroke="currentColor" stroke-width="1.8" />
        <path d="m4 13 1.7.7c.1.4.3.8.5 1.1l-.7 1.7 1.8 1.8 1.7-.7c.3.2.7.4 1.1.5L11 20h2l.7-1.7c.4-.1.8-.3 1.1-.5l1.7.7 1.8-1.8-.7-1.7c.2-.3.4-.7.5-1.1L20 13v-2l-1.7-.7c-.1-.4-.3-.8-.5-1.1l.7-1.7-1.8-1.8-1.7.7c-.3-.2-.7-.4-1.1-.5L13 4h-2l-.7 1.7c-.4.1-.8.3-1.1.5l-1.7-.7-1.8 1.8.7 1.7c-.2.3-.4.7-.5 1.1L4 11z" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round" />
      </symbol>
      <symbol id="i-remix" viewBox="0 0 24 24">
        <path d="M6 6h8a4 4 0 1 1 0 8H8m0 0 2.5-2.5M8 14l2.5 2.5" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
      </symbol>
      <symbol id="i-check" viewBox="0 0 24 24">
        <path d="m5 13 4 4 10-10" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
      </symbol>
      <symbol id="i-github" viewBox="0 0 24 24">
        <path d="M12 3a9 9 0 0 0-3 17.5v-3c-3 .6-3.7-1.4-3.7-1.4-.5-1.1-1.1-1.4-1.1-1.4-.9-.6.1-.6.1-.6 1 .1 1.6 1 1.6 1 .9 1.5 2.3 1.1 2.8.8.1-.7.4-1.1.7-1.4-2.4-.3-4.8-1.2-4.8-5.1 0-1.1.4-2 1-2.7 0-.3-.4-1.3.1-2.6 0 0 .8-.3 2.8 1a9.5 9.5 0 0 1 5 0c2-1.3 2.8-1 2.8-1 .5 1.3.1 2.3.1 2.6.6.7 1 1.6 1 2.7 0 3.9-2.4 4.8-4.8 5.1.4.4.7 1 .7 2.1v3A9 9 0 0 0 12 3Z" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round" />
      </symbol>
    </svg>

    <header class="hero">
      <a class="back-link" href="/">
        <svg><use href="#i-back"></use></svg>
        <span>返回主控台</span>
      </a>
      <h1>
        <svg class="title-icon"><use href="#i-md"></use></svg>
        <span>AiX Markdown 排版工坊</span>
      </h1>
      <p>
        参考 <a href="https://github.com/doocs/md" target="_blank" rel="noopener noreferrer">doocs/md</a>
        的思路进行二次创作，专注「长文排版 + 多平台适配 + 二创优化」。
      </p>
      <div class="hero-actions">
        <button id="importMainDraftBtn" class="btn btn-secondary">
          <svg><use href="#i-article"></use></svg>
          <span>读取主工具草稿</span>
        </button>
        <button id="loadSampleBtn" class="btn btn-secondary">
          <svg><use href="#i-magic"></use></svg>
          <span>填充示例 Markdown</span>
        </button>
        <button id="clearMarkdownBtn" class="btn btn-ghost">清空</button>
      </div>
    </header>

    <main class="workspace">
      <section class="panel panel-editor">
        <h2><svg><use href="#i-article"></use></svg><span>Markdown 编辑区</span></h2>
        <textarea id="markdownInput" spellcheck="false" placeholder="在这里粘贴你的长文 Markdown...\n\n支持标题、列表、引用、代码块、表格等常见语法。"></textarea>
        <div class="editor-meta">
          <span id="wordStats">字数 0 · 预计阅读 0 分钟</span>
          <span id="headingStats">标题 0 · 段落 0</span>
        </div>
      </section>

      <aside class="panel panel-controls">
        <h2><svg><use href="#i-setting"></use></svg><span>排版控制台</span></h2>

        <div class="control-grid">
          <label>
            发布平台
            <select id="platformSelect">
              <option value="wechat">公众号图文</option>
              <option value="blog" selected>博客长文</option>
              <option value="zhihu">知乎文章</option>
              <option value="xiaohongshu">小红书长文</option>
              <option value="bilibili">B站专栏</option>
            </select>
          </label>

          <label>
            主题风格
            <select id="themeSelect"></select>
          </label>

          <label>
            主色调
            <input id="accentColorInput" type="color" value="#2d8cf0" />
          </label>

          <label>
            正文字号
            <input id="fontSizeRange" type="range" min="14" max="22" value="16" />
          </label>

          <label>
            行间距
            <input id="lineHeightRange" type="range" min="1.4" max="2.1" step="0.05" value="1.75" />
          </label>

          <label>
            内容宽度
            <input id="contentWidthRange" type="range" min="620" max="980" step="10" value="760" />
          </label>
        </div>

        <div class="toggles">
          <label class="toggle-item">
            <input id="wechatFootnoteToggle" type="checkbox" checked />
            <span>公众号外链转底部引用</span>
          </label>
          <label class="toggle-item">
            <input id="imageCardToggle" type="checkbox" checked />
            <span>图片卡片化（更适合长文）</span>
          </label>
        </div>

        <div class="actions">
          <button id="copyRichBtn" class="btn btn-primary">
            <svg><use href="#i-copy"></use></svg>
            <span>复制富文本</span>
          </button>
          <button id="copyHtmlBtn" class="btn btn-secondary">
            <svg><use href="#i-copy"></use></svg>
            <span>复制 HTML</span>
          </button>
          <button id="downloadMdBtn" class="btn btn-secondary">
            <svg><use href="#i-download"></use></svg>
            <span>导出 .md</span>
          </button>
          <button id="downloadHtmlBtn" class="btn btn-secondary">
            <svg><use href="#i-download"></use></svg>
            <span>导出 .html</span>
          </button>
        </div>

        <div class="remix-box">
          <h3><svg><use href="#i-remix"></use></svg><span>二次创作提示词</span></h3>
          <label>
            二创方向
            <select id="remixModeSelect">
              <option value="structure">结构强化（逻辑更清楚）</option>
              <option value="story">故事化叙事（更有代入感）</option>
              <option value="insight">观点深挖（更适合博客）</option>
              <option value="wechat">公众号深度版（信息密度更高）</option>
              <option value="multi">多平台复用版（跨平台发布）</option>
            </select>
          </label>
          <textarea id="remixPromptOutput" rows="8" readonly></textarea>
          <button id="copyRemixPromptBtn" class="btn btn-ghost">复制二创提示词</button>
        </div>
      </aside>

      <section class="panel panel-preview">
        <h2><svg><use href="#i-preview"></use></svg><span>实时预览</span></h2>
        <p id="platformHint" class="platform-hint"></p>
        <div class="preview-shell">
          <article id="previewArticle" class="md-render"></article>
        </div>
      </section>
    </main>

    <footer class="footer">
      <p>
        <svg><use href="#i-check"></use></svg>
        排版工坊已接入本地草稿联动与自动保存，适合博客、公众号等大长文二次创作。
      </p>
      <p>
        <svg><use href="#i-github"></use></svg>
        Inspired by <a href="https://github.com/doocs/md" target="_blank" rel="noopener noreferrer">doocs/md</a>
        · Build by <a href="https://github.com/upgiorgio/AiX" target="_blank" rel="noopener noreferrer">upgiorgio/AiX</a> · Crafted by Giorgio
      </p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.2.6/dist/purify.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.11.1/highlight.min.js" defer></script>
    <script src="/md-lab/app.js?v=20260221-3" defer></script>
  </body>
</html>
